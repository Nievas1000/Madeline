<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget - Xuxa Prisiones</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- BotÃ³n flotante para abrir el chat -->
    <div class="chat-button" id="chatButton">
        <img src="made-logo.jpg" alt="Chat Bot" class="chat-button-icon">
        <span class="notification-badge" id="notificationBadge" style="display: none;">1</span>
    </div>

    <!-- Widget del chat -->
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">
            <div class="chat-header-content">
                <img src="made-logo.jpg" alt="Bot Avatar" class="chat-avatar">
                <div class="chat-header-info">
                    <h3 class="chat-title">Xuxa</h3>
                    <p class="chat-status">En lÃ­nea</p>
                </div>
            </div>
            <button class="chat-close" id="chatClose">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <img src="made-logo.jpg" alt="Bot" class="message-avatar" style="width: 32px !important; height: 32px !important; max-width: 32px !important; max-height: 32px !important; border-radius: 50%; object-fit: cover;">
                <div class="message-content">
                    <p>Â¡Hola! ðŸ‘‹ Soy Xuxa!. Â¿En quÃ© puedo ayudarte hoy?</p>
                    <span class="message-time"></span>
                </div>
            </div>
        </div>

        <div class="chat-input-container">
            <div class="typing-indicator" id="typingIndicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="chat-input-wrapper">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Escribe un mensaje..."
                    autocomplete="off"
                >
                <button class="chat-send" id="chatSend">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 8L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="chat.js?v=2"></script>
    
    <!-- Script para deshabilitar selecciÃ³n y menÃº contextual -->
    <script>
    // Deshabilitar menÃº contextual (click derecho) en el chat
    document.addEventListener('DOMContentLoaded', () => {
        const chatWidget = document.getElementById('chatWidget');
        const chatMessages = document.getElementById('chatMessages');
        
        if (chatWidget) {
            chatWidget.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                return false;
            });
        }
        
        if (chatMessages) {
            chatMessages.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                return false;
            });
            
            // Deshabilitar tambiÃ©n arrastrar para seleccionar
            chatMessages.addEventListener('mousedown', (e) => {
                if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                }
            });
        }
    });
    </script>
    
    <!-- Script para forzar tamaÃ±os de avatares -->
    <script>
    // FunciÃ³n para forzar el tamaÃ±o correcto de todos los avatares
    function fixAvatarSizes() {
        document.querySelectorAll('.message-avatar').forEach(img => {
            img.style.width = '32px';
            img.style.height = '32px';
            img.style.maxWidth = '32px';
            img.style.maxHeight = '32px';
            img.style.minWidth = '32px';
            img.style.minHeight = '32px';
        });
    }
    
    // Ejecutar al cargar
    window.addEventListener('load', fixAvatarSizes);
    
    // Ejecutar periÃ³dicamente para capturar mensajes nuevos
    setInterval(fixAvatarSizes, 1000);
    
    // Observer para detectar cuando se aÃ±aden nuevos mensajes
    const observer = new MutationObserver(fixAvatarSizes);
    document.addEventListener('DOMContentLoaded', () => {
        const chatMessages = document.getElementById('chatMessages');
        if (chatMessages) {
            observer.observe(chatMessages, { childList: true, subtree: true });
        }
    });
    </script>
</body>
</html>